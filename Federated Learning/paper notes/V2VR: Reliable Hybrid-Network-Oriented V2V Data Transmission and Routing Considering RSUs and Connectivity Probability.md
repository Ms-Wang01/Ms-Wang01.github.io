# V2VR: Reliable Hybrid-Network-Oriented V2V Data Transmission and Routing Considering RSUs and Connectivity Probability

# IEEE Transactions on Intelligent Transportation Systems. sci一区

## 背景
1. 车载自组织网络(VANETs)在智能交通系统广泛应用。
2. 自组织网络中拓扑的快速变化和频繁的链路断开， 提高 VANETs 的可靠性具有一定的挑战。丢包率和传输延迟增加。链路持续时间预测是数据传输和 路由的关键。
3. 当 GPS 出现问题时，很难 预测节点传输数据的位置，从而导致传输失败。
4. 在主动路由协议 中，数据传输延迟减少，但是不断变化的VANETs 中的拓扑很难预先配置路由表。
5. 在反应式路由协议中，减少了分组传输延 迟并支持几种数据传输模式；但是难以应用于包括高速移动车辆的环境中，并且可能 导致不必要的路由泛滥。

## 本文解决的问题
1. 提出了一种基于 Manhattan 移动模型的混合网络 HNR 路由决策方案。
2. 使用 rsu 的有线传 输结合无线 V2V 和 V2R 传输来做出路由决定。

## 相关工作
1. VANET 由支持车辆互连的移动通信基础设施组成，其中 网络节点可以使用 V2V 无线技术交换数据。当 V2V 无线模 式不可用时，rsu 充当助手来改进传输过程。
2. IEEE 802.11p中定义了车辆到基础设施(V2I)和 V2V 传输规则的细节。
3. 传统的 VANETs 路由协议可以分为三大类类别:基于拓扑的协议、基于位置的协议和基于广播的协议。GPS 定位服务广泛安装在车辆上，可以实时获取 车辆的位置。因此，基于位置的协议已经成为最广泛使用 的.
4. 著名的用于 VANETs 的基于位置 的贪婪周界无状态路由(GPSR)协议基于贪婪方法使用车辆 位置来路由分组。在 GPSR，数据包传输通过两种方法进 行:贪婪转发和边界转发。在获得源节点和目的节点后， 贪婪转发方法总是选择离目的节点最近的邻居。如果贪婪 传输失败，协议使用右手规则来维持边界转发。然 而，GPSR 可能会遇到局部极大值的问题。
5. Chen 等人提出了城市区域的全局状态路由(GSR) 协议。该机制包括 Dijkstra 的最短路径算法跨越不 同的路口。然而，这种方案仍然受到局部极大值问题的困 扰。
6. Dua 等人提出了一种适用于密集区域的 QoS 感知 数据传播方法，以支持未来 5G 网络应用中的快速数据速 率。提出了一种基于奖励和惩罚的边权重的智能转发机 制，其中权重被分配给从源到目的地的不同路由路径。然 后，使用Dijkstra的最短路径算法传输数据
7. Trullols 等人将 RSU 部署问题形式化为最大覆盖问题，并引入 启发式算法来最大化 rsu 服务的车辆数量以及车辆和 rsu 之间的联系时间。

## V2V传输场景下的车辆运动模型
提出了一个适用于城市环境的可靠的 VANET路由决策方案。

该方案旨在通过增加使用rsu通信 能力的有线网络来增强VANETs无线网络。行驶中的车辆 会受到道路拓扑、周围环境和交通规则等因素的显著影 响。因此，在为形式分析和交通预测对移动交通节点模式 建模时，将考虑这些限制。
### 移动车辆行为的约束
<img width="447" alt="image" src="https://user-images.githubusercontent.com/70552149/180334550-d9f11949-1047-4794-99c7-558cf8b18071.png">
一些基本的高中物理知识，给定初速度，算加速度、距离等，避免追尾。

添加了车辆传输距离的东西，超过一定行驶条件，通信链路可能会中断。

<img width="391" alt="image" src="https://user-images.githubusercontent.com/70552149/180334597-4aace9a7-4206-4626-b6d4-daf3711fca81.png">

因为车辆节点不断移动，它们的位置变化可能导致低质量的连接。因此，数据传输的条件取决于传输范围内节点之间的距离。

节点之间的连接不仅直接影响两辆车，还会影响整个网络的传输性能。测量节点之间的连通 性是为了监控它们之间的距离。

采用离散时间马尔可夫链来模拟相对距离关系，其中节点和它们的邻居以概率的形式表示。

定义1: 两个节点间的相对距 离用欧氏距离表示。

1) 下一个状态有三种可能的状态:当前环、内环或外环。
2) 最里面和最外面的环中的节点对于下一个状态可能 有两种情况:在当前环上或者移动到相邻环。

定义2: 车辆离散马尔可夫链，DMC4V，考虑到连通概 率，移动的车辆节点被定义为四元组 D (S，Sinit，P，L)，其中:

1）s是一组有限状态，其中每个状态代表道路上的一个 车辆节点。
2）Sinit是初始状态，Sinit ∈ S。
3) P : S × S → [0，1]是s的转移概率矩阵。
4）L是标签函数，其中L(s)表示将一组原子命题 分配给集合 s 中的每个状态 s。

<img width="404" alt="image" src="https://user-images.githubusercontent.com/70552149/180336247-03eed22d-1320-4ef4-99a3-637276850b5f.png">

为了计算概率，我们使用概率模型检查工具(PRISM)来验证概率模型。

<img width="433" alt="image" src="https://user-images.githubusercontent.com/70552149/180336473-59d9bf43-8979-42a4-a1a5-fa2dfd95be39.png">
网络中节点的移动轨迹被抽象为由有向边 和交叉点组成的有向图。一个节点最初被分配一个随机的 方向和速度，并沿着道路结构移动。

定义3: （车辆运动模型):车辆运动模型基于 曼哈顿移动模型，其特征描述如下:

1) 这个模型由代表道路的水平线和垂直线组成。大多 数道路支持车辆同时向两个相反的方向行驶。
2) 在交叉点，节点可以直行、左转或右转，概率分别为 p1、p2 和 p3，其中<img width="137" alt="image" src="https://user-images.githubusercontent.com/70552149/180336662-5398dad7-75d3-42d6-867c-3f2f94dc3a1b.png">

## 基于混合网络的VANET路由方案
### 相关概念
<img width="429" alt="image" src="https://user-images.githubusercontent.com/70552149/180656418-bb32f17a-3ea8-4eb7-9a86-419b270c6a28.png">
无线传输包括 V2V 和 V2R。在 V2V 模式下，当车辆在传输范围内时，它们可以相互通信。如果两辆车之间的距离变得太大，或者传输链路变得不稳定，传输就会失败。V2R 模式是指车辆和RSU之间的数据传输。当车辆进入 RSU 的范围时，它将更喜欢使用RSU。这种方法要求车辆保持在 RSU 的可及范围内。由于不稳定的链路、短的传输范围和低的传输速度，无线传输具有相对高的分组丢失率和长的传输延迟。

车辆之间的无线连接和 rsu 之间的有线连接如图8所示:在无线传输范围内(用r表示)的车辆之间仍然使用无线传输。路侧单元提前布置在路旁，通过有线网络连接。当车辆进入RSU (R表示)的传输范围时，车辆可以与RSU进行通信，实现数据包的无缝传输。这种混合传动模式的实例研究如图9所示。
### V2V无线传输方案
提出了改进的GPSR（引用别的文章）路由协议(GPSR-improved)，该协议引入了同时考虑距离和角度因素的预测机制。

<img width="436" alt="image" src="https://user-images.githubusercontent.com/70552149/180657800-3a644f26-4303-4fd2-a7da-8817dc2f6396.png">

如图10所示，车辆节点A、B、C位于不同位置。在该场景中，源节点为A，传输半径为r。最初B和C都在传输范围内，C距离目的节点更近。根据贪心算法，应该选择C作为下一跳节点。但由于车辆速度和加速度的差异，节点C迅速超出通信范围，导致传输失败。因此，A实际上应该选择B作为下一跳。改进的贪心算法首先通过相对位置预测机制剔除无效节点。（有效节点应满足下面公式）。

<img width="481" alt="image" src="https://user-images.githubusercontent.com/70552149/180657879-596dfe3b-a8d4-4898-a995-5fc7702e8ed8.png">

在排除可能很快就会超出范围的节点之后，剩余的节点被记录为有效节点。接下来，在所有有效节点中选择最合适的下一跳节点。选择过程如下：

<img width="462" alt="image" src="https://user-images.githubusercontent.com/70552149/180657932-0b5a5a31-f3e4-428d-9cd4-a46b1eb2f4ca.png">

1. 首先，A在传输范围内只有B，与目标节点候选F的夹角为锐角;C、D、E三个节点都在B的传输范围内。节点 B、C、F 表示为角度 1，用1表示，节点 B、E、F 之 间的角度为角度 2，用2表示，节点 B、D、F 之间的角度表示为角度 3，用3表示，其中(角度 3 <角度 2 <角度 1)。因此，如果 C、D 和 E 与节点 B 之间的距离相似，我们将选择 D 作为下一跳节点，它是与 f 成最小角度的节点。
2. 当传输范围内存在多个有效节点时，同时考虑距离和角度，进一步确定下一跳节点。设当前节点为i，目标节点为k，节点i、j与k之间的夹角表示为∠j, i与j之间的距离记为欧氏距离dij。每个有效节点都有一个权值。
3. 最后选取权值最大的节点作为下一跳节点。
